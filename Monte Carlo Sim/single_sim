import numpy as np
import matplotlib.pyplot as plt

# --- 1. SETUP PARAMETERS ---
S0 = 100       # Initial Stock Price ($)
mu = 0.10      # Expected Annual Return (10%)
sigma = 0.20   # Annual Volatility (Risk) (20%)
T = 1.0        # Time Horizon (1 Year)
days = 252     # Number of trading days

# Calculate the time step size (dt)
dt = T / days

# --- 2. PREPARE THE DATA CONTAINERS ---
# Create an array to hold our stock prices. 
# We add +1 because we include day 0 (the start).
stock_prices = np.zeros(days + 1)

# Set the first price to S0
stock_prices[0] = S0

# --- 3. THE SIMULATION LOOP ---
# We loop through every day from 1 to 252
for t in range(1, days + 1):
    # Generate a random Z score (shock) from a normal distribution
    # Mean = 0, Std Dev = 1
    Z = np.random.normal(0, 1)
    
    # The Drift Component (Trend) - adjusted by Ito's Lemma
    drift = (mu - 0.5 * sigma**2) * dt
    
    # The Shock Component (Randomness)
    shock = sigma * np.sqrt(dt) * Z
    
    # Calculate Today's Price based on Yesterday's Price
    # Formula: Price(t) = Price(t-1) * e^(drift + shock)
    stock_prices[t] = stock_prices[t-1] * np.exp(drift + shock)

# --- 4. VISUALIZATION ---
plt.figure(figsize=(10, 6))
plt.plot(stock_prices)
plt.title("Single Path Simulation: Geometric Brownian Motion")
plt.xlabel("Days")
plt.ylabel("Stock Price ($)")
plt.grid(True)
plt.show()